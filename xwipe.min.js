function Xwipe(A,C,B){this.el=A;this.element=A.children[0];if(this.element.children.length==2){this.realLength=2;this.element.appendChild(this.element.children[0].cloneNode(true));this.element.appendChild(this.element.children[1].cloneNode(true))}this.slides=this.element.children;this.sLength=this.slides.length;this.options=C||{};this.options={curIndex:this.options.curIndex||0,speed:this.options.speed||300,auto:this.options.auto||0,callback:this.options.callback||null};this.autoTimer=0;this.startStatus={};this.endStatus={};this.delta={};this.slidePos=[];this.canSkip=true;this.isScrollY;this.tab=B||null;if(this.tab){this.tabModule()}this.init();this.initEvents()}Xwipe.prototype={version:"1.0.2",handleEvent:function(A){switch(A.type){case"touchstart":this.touchStart(A);break;case"touchmove":this.touchMove(A);break;case"touchend":this.touchEnd(A);break;case"resize":this.init();break;case"click":this.getTabIndex(A);break}},init:function(){this.width=this.el.getBoundingClientRect().width||this.el.offsetWidth;this.element.style.width=(this.sLength*this.width)+"px";var B=this.sLength;while(B--){var A=this.slides[B];A.style.width=this.width+"px";A.style.left=(B*-this.width)+"px";this.medium(B,this.width,0)}if(this.sLength!=1){this.medium(this.circle(this.options.curIndex-1),-this.width,0)}this.medium(this.options.curIndex,0,0);if(this.sLength!=1){this.medium(this.circle(this.options.curIndex+1),this.width,0)}this.el.style.visibility="visible";this.clearTimer();this.setTimer()},medium:function(C,B,A){this.slidePos[C]=B;this.translate(C,B,A)},translate:function(D,C,A){var B=this.slides[D];B.style.webkitTransitionDuration=A+"ms";B.style.webkitTransform="translate3d("+C+"px, 0, 0)"},circle:function(A){return(this.sLength+(A%this.sLength))%this.sLength},initEvents:function(){this.el.addEventListener("touchstart",this,false);this.el.addEventListener("touchmove",this,false);this.el.addEventListener("touchend",this,false);window.addEventListener("resize",this,false)},touchStart:function(A){var B=A.touches[0];this.startStatus={x:B.pageX,y:B.pageY,time:new Date().getTime()};this.isScrollY=undefined;this.clearTimer()},touchMove:function(A){if(A.touches.length>1||A.scale&&A.scale!==1){return}var B=A.touches[0];this.endStatus={x:B.pageX,y:B.pageY,time:new Date().getTime()};this.delta.x=this.endStatus.x-this.startStatus.x;this.delta.y=this.endStatus.y-this.startStatus.y;this.delta.time=this.endStatus.time-this.startStatus.time;if(typeof this.isScrollY=="undefined"){this.isScrollY=!!(this.isScrollY||Math.abs(this.delta.x)<Math.abs(this.delta.y))}if(!this.isScrollY){A.preventDefault();if(this.sLength!=1){this.translate(this.circle(this.options.curIndex-1),this.delta.x+this.slidePos[this.circle(this.options.curIndex-1)],0)}this.translate(this.options.curIndex,this.delta.x+this.slidePos[this.circle(this.options.curIndex)],0);if(this.sLength!=1){this.translate(this.circle(this.options.curIndex+1),this.delta.x+this.slidePos[this.circle(this.options.curIndex+1)],0)}}},touchEnd:function(A){if(!this.isScrollY){var B=false;if(Math.abs(this.delta.x)>this.width/2||this.delta.time<250&&Math.abs(this.delta.x)>20){B=true;if(this.delta.x>0){this.medium(this.circle(this.options.curIndex+1),this.width,this.options.speed);this.options.curIndex=this.circle(this.options.curIndex-1)}else{this.medium(this.circle(this.options.curIndex-1),-this.width,this.options.speed);this.options.curIndex=this.circle(this.options.curIndex+1)}this.slideCallback(this.options.curIndex)}if(this.sLength!=1){this.medium(this.circle(this.options.curIndex-1),-this.width,(B&&(this.delta.x>0))?0:this.options.speed)}this.medium(this.options.curIndex,0,this.options.speed);if(this.sLength!=1){this.medium(this.circle(this.options.curIndex+1),this.width,(B&&(this.delta.x<0))?0:this.options.speed)}this.setTimer()}},getDirection:function(A){return(A-this.options.curIndex)*(Math.abs(A-this.options.curIndex)>this.sLength/2?-1:1)>0?1:-1},goTo:function(B){if(this.options.curIndex==B||!this.canSkip){return}this.canSkip=false;this.clearTimer();B=this.circle(B);var C=this.getDirection(B);this.translate(B,C*this.width,0);var A=this;setTimeout(function(){A.medium(A.options.curIndex,-C*A.width,A.options.speed);A.medium(B,0,A.options.speed);A.options.curIndex=B},0);setTimeout(function(){A.medium(A.circle(B-1),-A.width,0);A.medium(A.circle(B+1),A.width,0);A.canSkip=true},A.options.speed);this.slideCallback(B);this.setTimer()},prev:function(){this.goTo(this.options.curIndex-1)},next:function(){this.goTo(this.options.curIndex+1)},setTimer:function(){if(this.options.auto){var A=this;A.autoTimer=setInterval(function(){A.next()},this.options.auto)}},clearTimer:function(){if(this.options.auto){clearInterval(this.autoTimer)}},tabModule:function(){this.navs=this.tab.children;this.tab.addEventListener("click",this,false);this.tabHandle(this.options.curIndex)},getTabIndex:function(A){var B=[].indexOf.call(this.navs,A.target);B=this.twoSlideFix(B);if(B>=0){this.goTo(B)}},tabHandle:function(C){for(var A=0,B=this.navs.length;A<B;A++){this.navs[A].classList.remove("on")}this.navs[C].classList.add("on")},slideCallback:function(A){A=this.twoSlideFix(A);if(this.options.callback){this.options.callback(A)}if(this.tab){this.tabHandle(A)}},twoSlideFix:function(A){if(this.realLength==2){return A%2}else{return A}}};