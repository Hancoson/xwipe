"use strict";function Xwipe(t,i,s){this.el=t,this.element=t.children[0],2==this.element.children.length&&(this.realLength=2,this.element.appendChild(this.element.children[0].cloneNode(!0)),this.element.appendChild(this.element.children[1].cloneNode(!0))),this.slides=this.element.children,this.sLength=this.slides.length,this.options=i||{},this.options={curIndex:this.options.curIndex||0,speed:this.options.speed||300,auto:this.options.auto||0,callback:this.options.callback||null},this.autoTimer=0,this.startStatus={},this.endStatus={},this.delta={},this.slidePos=[],this.canSkip=!0,this.isScrollY,this.tab=s||null,this.tab&&this.tabModule(),this.init(),this.initEvents()}Xwipe.prototype={version:"1.0.2",handleEvent:function(t){switch(t.type){case"touchstart":this.touchStart(t);break;case"touchmove":this.touchMove(t);break;case"touchend":this.touchEnd(t);break;case"resize":this.init();break;case"click":this.getTabIndex(t)}},init:function(){this.width=this.el.getBoundingClientRect().width||this.el.offsetWidth,this.element.style.width=this.sLength*this.width+"px";for(var t=this.sLength;t--;){var i=this.slides[t];i.style.width=this.width+"px",i.style.left=t*-this.width+"px",this.medium(t,this.width,0)}1!=this.sLength&&this.medium(this.circle(this.options.curIndex-1),-this.width,0),this.medium(this.options.curIndex,0,0),1!=this.sLength&&this.medium(this.circle(this.options.curIndex+1),this.width,0),this.el.style.visibility="visible",this.clearTimer(),this.setTimer()},medium:function(t,i,s){this.slidePos[t]=i,this.translate(t,i,s)},translate:function(t,i,s){var e=this.slides[t];e.style.webkitTransitionDuration=s+"ms",e.style.webkitTransform="translate3d("+i+"px, 0, 0)"},circle:function(t){return(this.sLength+t%this.sLength)%this.sLength},initEvents:function(){this.el.addEventListener("touchstart",this,!1),this.el.addEventListener("touchmove",this,!1),this.el.addEventListener("touchend",this,!1),window.addEventListener("resize",this,!1)},touchStart:function(t){var i=t.touches[0];this.startStatus={x:i.pageX,y:i.pageY,time:(new Date).getTime()},this.isScrollY=void 0,this.canSlide=!1,this.clearTimer()},touchMove:function(t){if(!(t.touches.length>1||t.scale&&1!==t.scale)){var i=t.touches[0];this.endStatus={x:i.pageX,y:i.pageY,time:(new Date).getTime()},this.delta.x=this.endStatus.x-this.startStatus.x,this.delta.y=this.endStatus.y-this.startStatus.y,this.delta.time=this.endStatus.time-this.startStatus.time,"undefined"==typeof this.isScrollY&&(this.isScrollY=!!(this.isScrollY||Math.abs(this.delta.x)<Math.abs(this.delta.y))),this.isScrollY||(t.preventDefault(),1!=this.sLength&&this.translate(this.circle(this.options.curIndex-1),this.delta.x+this.slidePos[this.circle(this.options.curIndex-1)],0),this.translate(this.options.curIndex,this.delta.x+this.slidePos[this.circle(this.options.curIndex)],0),1!=this.sLength&&this.translate(this.circle(this.options.curIndex+1),this.delta.x+this.slidePos[this.circle(this.options.curIndex+1)],0)),this.canSlide=!0}},touchEnd:function(t){if(!this.isScrollY&&this.canSlide){var i=!1;(Math.abs(this.delta.x)>this.width/2||this.delta.time<250&&Math.abs(this.delta.x)>20)&&(i=!0,this.delta.x>0?(this.medium(this.circle(this.options.curIndex+1),this.width,this.options.speed),this.options.curIndex=this.circle(this.options.curIndex-1)):(this.medium(this.circle(this.options.curIndex-1),-this.width,this.options.speed),this.options.curIndex=this.circle(this.options.curIndex+1)),this.slideCallback(this.options.curIndex)),1!=this.sLength&&this.medium(this.circle(this.options.curIndex-1),-this.width,i&&this.delta.x>0?0:this.options.speed),this.medium(this.options.curIndex,0,this.options.speed),1!=this.sLength&&this.medium(this.circle(this.options.curIndex+1),this.width,i&&this.delta.x<0?0:this.options.speed)}this.setTimer()},getDirection:function(t){return(t-this.options.curIndex)*(Math.abs(t-this.options.curIndex)>this.sLength/2?-1:1)>0?1:-1},goTo:function(t){if(this.options.curIndex!=t&&this.canSkip){this.canSkip=!1,this.clearTimer(),t=this.circle(t);var i=this.getDirection(t);this.translate(t,i*this.width,0);var s=this;setTimeout(function(){s.medium(s.options.curIndex,-i*s.width,s.options.speed),s.medium(t,0,s.options.speed),s.options.curIndex=t},0),setTimeout(function(){s.medium(s.circle(t-1),-s.width,0),s.medium(s.circle(t+1),s.width,0),s.canSkip=!0},s.options.speed),this.slideCallback(t),this.setTimer()}},prev:function(){this.goTo(this.options.curIndex-1)},next:function(){this.goTo(this.options.curIndex+1)},setTimer:function(){if(this.options.auto){var t=this;t.autoTimer=setInterval(function(){t.next()},this.options.auto)}},clearTimer:function(){this.options.auto&&clearInterval(this.autoTimer)},tabModule:function(){this.navs=this.tab.children,this.tab.addEventListener("click",this,!1),this.tabHandle(this.options.curIndex)},getTabIndex:function(t){var i=[].indexOf.call(this.navs,t.target);i=this.twoSlideFix(i),i>=0&&this.goTo(i)},tabHandle:function(t){for(var i=0,s=this.navs.length;s>i;i++)this.navs[i].classList.remove("on");this.navs[t].classList.add("on")},slideCallback:function(t){t=this.twoSlideFix(t),this.options.callback&&this.options.callback(t),this.tab&&this.tabHandle(t)},twoSlideFix:function(t){return 2==this.realLength?t%2:t}};
